<p id="notice"><%= notice %></p>

<h1>Pois</h1>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th colspan="3"></th>
        </tr>
    </thead>

    <tbody>
        <% @pois.each do |poi| %>
        <tr>
            <td><%= poi.name %></td>
            <td><%= poi.latitude %></td>
            <td><%= poi.longitude %></td>
            <td><%= link_to 'Show', poi %></td>
            <td><%= link_to 'Edit', edit_poi_path(poi) %></td>
            <td><%= link_to 'Destroy', poi, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<div data-controller="pois">
    <div style="width: 100%; height: 600px;" data-controller="mapbox" data-target="mapbox.wrapper" data-markers="<%= @pois.to_json %>" data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
        <div data-target="mapbox.map" data-reflex-permanent class="w-100 h-100">
        </div>
    </div>

    <form data-target="pois.form" class="mt-5 container">
        <div class="form-group">
            <label for="poi_name">POI Name</label>
            <input class="form-control" type="text" data-target="pois.address" name="poi_name" id="poi_name">
        </div>
        <button data-action="click->pois#add" type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
<%= link_to 'New Poi', new_poi_path %>